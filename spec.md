# Регистрация, авторизация, аутентификация.

## 1. Регистрация пользователя.
- После успешной регистрации пользователю выдаётся токен, авторизация происходит автоматом, перебрасывает на страницу профиля.
- Также выдаётся id, который записывается в store. В дальнейшем берется только от туда. 
- Далее нужно будет сделать подтверждение по почте

## 2. Авторизация
- Заменить name на login
- В ответе получаем токен и id сохраняем его в куках и в сторе. 
- После успешной авторизации перебрасываем на страницу профиля по id из ответа от сервера. 
- При успешной авторизации показываем кнопку выхода

## 3. Аутентификация
- при отправке на сервер токен берется из куков браузера или из куков заголовка запроса. 
- при переходе по закрытому маршруту на сервере проверяется валидность текущего токена из заголовка авторизации. Если ок миддлавара аутентификации отдает id пользователя 

## 4. Разлогирование
- при клике на выход удалять куки и удаляем id из стора
- в дальнейшем при использовании рефреш токена, делать запрос на сервер и удалять рефреш токен из БД по id пользователя

## 5. Загрузка публичной страницы
- проверяем по токену в куки существует ли данный пользователь в БД
- в ответе отправялем данные для страницы и id пользователя
- записываем id пользователя в стор

## 6. Работа с рефреш токенами.
- при регистрации или авторизации пользователю выдается токен и рефреш токен. На клиенте оба записываются в куки
- при попытке отправки запроса по закрытому маршруту на клиенте проверяется не стух ли токен, если стух то запрос уходит на маршрут /refresh